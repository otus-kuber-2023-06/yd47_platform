# Конфигурация маршрутизации и безопасности

## Описание
 Модуль для настройки маршрутизации между подсетями и политик доступа. 

### Группы доступа
 - internal - для связности мастеров и воркеров. Разрешено всё в рамках этой самой группы; 
 - k8s_master - для доступа к мастер нодам. Разрешён доступ к 443 порту для IP адресов, которые указаны в переменной `white_ips_for_master`, а так же балансировщикам YC;
 - k8s_worker - группа безопасности для воркеров. Разрешен весь трафик.

## Структура 

### s_variables.tf 
 Используется для объявления переменных:
 - white_ips_for_master - access list, IP адреса для которых открыт доступ к ресурсам кластера;

### i_variables
 Используется для объявления переменных, импортированных из другого модуля:
 - network-main-id - ID сети в yandex cloud;

### terraform.tvfars
 Используется для определения значений переменных
 
### security-group.tf
 Используется для определения групп и политик доступа.
 переменные:
   - network-main-id - (src. ../network/outputs.tf) - ID сети в yandex cloud;
   - white_ips_for_master - (src. terraform.tfvars) - список IP адресов, для который открыт доступ к ресурсам кластера;

### outputs.tf
Используется для экспорта фактов о ресурсах созданных в YC, для переиспользования в других модулях.

## Зависимости модуля 
 Модуль зависит от модулей:
  - network
